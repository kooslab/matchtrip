<!doctype html>
<html lang="ko">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>ì˜¤í”„ë¼ì¸ - ë§¤ì¹˜íŠ¸ë¦½</title>
		<style>
			* {
				margin: 0;
				padding: 0;
				box-sizing: border-box;
			}

			body {
				font-family:
					-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
				background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
				min-height: 100vh;
				display: flex;
				align-items: center;
				justify-content: center;
				padding: 20px;
			}

			.container {
				background: white;
				border-radius: 20px;
				padding: 40px;
				max-width: 400px;
				width: 100%;
				text-align: center;
				box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
			}

			.icon {
				width: 120px;
				height: 120px;
				margin: 0 auto 30px;
				background: #f3f4f6;
				border-radius: 50%;
				display: flex;
				align-items: center;
				justify-content: center;
				font-size: 60px;
			}

			h1 {
				color: #1f2937;
				font-size: 28px;
				margin-bottom: 15px;
				font-weight: 700;
			}

			p {
				color: #6b7280;
				font-size: 16px;
				line-height: 1.6;
				margin-bottom: 30px;
			}

			.features {
				text-align: left;
				margin: 30px 0;
			}

			.feature {
				display: flex;
				align-items: center;
				margin-bottom: 15px;
				color: #4b5563;
			}

			.feature-icon {
				width: 24px;
				height: 24px;
				margin-right: 12px;
				flex-shrink: 0;
			}

			button {
				background: #1095f4;
				color: white;
				border: none;
				padding: 12px 30px;
				font-size: 16px;
				border-radius: 8px;
				cursor: pointer;
				font-weight: 600;
				transition: background 0.3s;
			}

			button:hover {
				background: #0c7cd5;
			}

			button:disabled {
				background: #9ca3af;
				cursor: not-allowed;
			}

			.status {
				margin-top: 20px;
				padding: 10px;
				background: #fef3c7;
				border-radius: 8px;
				color: #92400e;
				font-size: 14px;
				display: none;
			}

			.status.online {
				background: #d1fae5;
				color: #065f46;
			}

			.status.show {
				display: block;
			}
		</style>
	</head>
	<body>
		<div class="container">
			<div class="icon">ğŸ“¡</div>
			<h1>ì¸í„°ë„· ì—°ê²° ì—†ìŒ</h1>
			<p>
				í˜„ì¬ ì˜¤í”„ë¼ì¸ ìƒíƒœì…ë‹ˆë‹¤.<br />
				ì¸í„°ë„· ì—°ê²°ì„ í™•ì¸í•´ ì£¼ì„¸ìš”.
			</p>

			<div class="features">
				<div class="feature">
					<span class="feature-icon">âœ“</span>
					<span>ì´ ì•±ì€ ì˜¤í”„ë¼ì¸ì—ì„œë„ ì¼ë¶€ ê¸°ëŠ¥ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤</span>
				</div>
				<div class="feature">
					<span class="feature-icon">âœ“</span>
					<span>ì—°ê²°ì´ ë³µêµ¬ë˜ë©´ ìë™ìœ¼ë¡œ ë™ê¸°í™”ë©ë‹ˆë‹¤</span>
				</div>
				<div class="feature">
					<span class="feature-icon">âœ“</span>
					<span>ìºì‹œëœ ë°ì´í„°ëŠ” ê³„ì† ì ‘ê·¼ ê°€ëŠ¥í•©ë‹ˆë‹¤</span>
				</div>
			</div>

			<button id="retryBtn" onclick="checkConnection()">ë‹¤ì‹œ ì‹œë„</button>

			<div id="status" class="status">ì—°ê²° ìƒíƒœë¥¼ í™•ì¸í•˜ëŠ” ì¤‘...</div>
		</div>

		<script>
			let retryCount = 0;
			const maxRetries = 3;

			function checkConnection() {
				const btn = document.getElementById('retryBtn');
				const status = document.getElementById('status');

				btn.disabled = true;
				btn.textContent = 'í™•ì¸ ì¤‘...';
				status.className = 'status show';
				status.textContent = 'ì—°ê²° ìƒíƒœë¥¼ í™•ì¸í•˜ëŠ” ì¤‘...';

				fetch('/api/health', { method: 'HEAD' })
					.then(() => {
						// Connection restored
						status.className = 'status online show';
						status.textContent = 'ì—°ê²°ì´ ë³µêµ¬ë˜ì—ˆìŠµë‹ˆë‹¤! í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•©ë‹ˆë‹¤...';
						setTimeout(() => {
							window.location.reload();
						}, 1500);
					})
					.catch(() => {
						// Still offline
						retryCount++;
						btn.disabled = false;

						if (retryCount >= maxRetries) {
							btn.textContent = 'ìƒˆë¡œê³ ì¹¨';
							status.textContent = `ì—¬ì „íˆ ì˜¤í”„ë¼ì¸ ìƒíƒœì…ë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”.`;
							retryCount = 0;
						} else {
							btn.textContent = 'ë‹¤ì‹œ ì‹œë„';
							status.textContent = `ì—°ê²°í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. (ì‹œë„ ${retryCount}/${maxRetries})`;
						}
					});
			}

			// Auto-check connection every 30 seconds
			setInterval(() => {
				fetch('/api/health', { method: 'HEAD' })
					.then(() => {
						window.location.reload();
					})
					.catch(() => {
						// Still offline, do nothing
					});
			}, 30000);

			// Listen for online event
			window.addEventListener('online', () => {
				checkConnection();
			});
		</script>
	</body>
</html>
